<!doctype html>
<html>
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Roll the dice</title>
  <style type="text/css">
  body {
  overflow:hidden;
  margin:0;
  font:62.5% helvetica,arial,'sans-serif';
  background:#000;
}
#roll {
  position:absolute; top:0; z-index:2;
  width:100%; height:100%;
  text-indent:-9999px;
  cursor:pointer;
}
p {
  position:absolute; z-index:1; top:50%;
  width:100%;
  margin:0;
  color:#fff; font-size:3em;
  text-align:center;
  -webkit-transition:opacity 1s;
}
p.hide {
  opacity:0;
}
input {
  position:absolute; top:.5em; left:1em; z-index:3;
}
b {
  position:absolute; top:1em; right:1em; z-index:1;
  font-size:5em; font-weight:bold;
  color:#d0d0d0;
  text-shadow:2px 2px 0 #000;
}
.dice, .dots {
  margin:0; padding:0;
  list-style:none;
}
.dice li {
  display:inline-block;
  margin:.1em; padding:.6em;
  width:2.4em; height:2.4em;
  font-size:4em;
  background:#fff;
  border-radius:20%;

  position:absolute; bottom:-100px; left:50%;
  -webkit-transition-property:bottom, left, transform;
          transition-property:bottom, left, transform;
  -webkit-transition-duration:1s;
          transition-duration:1s;
  -webkit-transition-timing-function:ease-out;
          transition-timing-function:ease-out;
}

.dots {
  position:relative; top:0; left:0;
  width:100%; height:100%;
}
.dots li {
  position:absolute; top:0; left:0;
  display:block;
  width:.3em; height:.3em;
  margin:0; padding:0;
  font-size:2em;
  background:#fff;
  border-radius:50%;
}
.n6 .dots li {
  background:#000;
}

li.n1 { background:#d33; }
li.n2 { background:#33d; }
li.n3 { background:#3d3; }
li.n4 { background:#dd3; }
li.n5 { background:#d3d; }

li.n1 .d0,
li.n3 .d2,
li.n5 .d4 {
  top:50%; left:50%;
  margin:-.15em 0 0 -.15em;
}
li.n4 .d1,
li.n5 .d1,
li.n6 .d1 {
  top:0; left:auto; right:0;
}
li.n2 .d1,
li.n3 .d1,
li.n4 .d2,
li.n5 .d2,
li.n6 .d3 {
  top:auto; left:auto; bottom:0; right:0;
}
li.n4 .d3,
li.n5 .d3,
li.n6 .d4 {
  top:auto; bottom:0;
}
li.n6 .d2,
li.n6 .d5 {
  top:50%;
  margin-top:-.15em;
}
li.n6 .d2 {
  left:auto; right:0;
}

  </style>
</head>
<body>
  <p>hit anywhere to roll the dice</p>
  <input type="range" min="1" max="6" step="1" value="1" id="quantity" />
  <b></b>
  <ol class="dice"></ol>
  <a href="#" id="roll">roll</a>
  
  <script>
  var button = document.querySelector('#roll'),
    dice = document.querySelector('.dice'),
    quantity = document.querySelector('#quantity'),
    total = document.querySelector('b'),
    help = document.querySelector('p');

button.addEventListener('click', function(e){
  e.preventDefault();

  var y = 0, x, d = document, hidden = false,
      num, die, dots, dot, diameter, sum,
      hideHelp, rand, randomise, el;

  hideHelp = function(){
    if (hidden) { return; }
    help.className = 'hide';
  };

  rand = function(factor){
    return ~~(Math.random() * factor) + 1;
  };

  randomise = function(){
    die.style.bottom = rand(d.documentElement.clientHeight-diameter)+'px';
    die.style.left = rand(d.documentElement.clientWidth-diameter)+'px';
    die.style['-webkit-transform'] = 'rotate('+(rand(1340)-670)+'deg)';
  };

  el = function(e){
    return d.createElement(e);
  };
  
  sum = 0;

  hideHelp();
  
  while (dice.childNodes.length > 0){
    dice.removeChild(dice.childNodes[0]);
  }

  while (y < quantity.value){

    num = rand(6);

    sum+= num;

    dots = el('ul');
    dots.className = 'dots';
    
    die = el('li');
    die.className = 'n'+num;
    
    for (x=0; x<num; x++){
      dot = el('li');
      dot.className = 'd'+x;
      dots.appendChild(dot);
    }

    die.appendChild(dots);
    dice.appendChild(die);

    diameter = die.offsetWidth;

    setTimeout(randomise(), 5);

    y++;
  }

  total.innerHTML = sum;

});

  </script>
</head>
</body>
</html>
